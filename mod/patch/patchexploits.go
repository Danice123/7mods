package patch

import (
	"fmt"

	"github.com/Danice123/7mods/mod"
	"github.com/Danice123/7mods/sevenxml"
)

var PATCHED_EXP_ITEMS = []string{
	"resourceRockSmallBundle",
	"resourceWoodBundle",
	"resourceScrapIronBundle",
	"resourceIronFragmentBundle",
	"resourcePotassiumNitratePowderBundle",
	"resourceLeadBundle",
	"resourceCoalBundle",
	"resourceOilShaleBundle",
	"ammoGasCanBundle",
	"resourceGunPowderBundle",
}

func PatchExploits() *mod.Mod {

	itemOverride := mod.NewModFile(mod.ITEMS)

	fixExpProperty := sevenxml.Property{
		Name:  "CraftingIngredientExp",
		Value: "0",
	}

	for _, item := range PATCHED_EXP_ITEMS {
		itemOverride.Append(fmt.Sprintf("/items/item[@name='%s']", item), []interface{}{fixExpProperty})
	}

	return &mod.Mod{
		Name:        "Patch_Exploits",
		Description: "",
		Files: []*mod.Modfile{
			itemOverride,
		},
	}
}
